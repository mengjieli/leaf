{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///../src/main.ts","webpack:///../src/modules/bull/bull-scene.ts","webpack:///../src/modules/bull/components/bull-core.ts","webpack:///../src/utils/ui/module-scene.ts"],"names":[],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"../src/main.ts\");\n","import { FaceScene } from \"./modules/puzzle/face/face-scene\";\nimport { PuzzleScene } from \"./modules/puzzle/puzzle-scene\";\nimport { PuzzleScriptScene } from \"./modules/puzzle-script/puzzle-script-scene\";\nimport { PlayerData } from \"./net/player-data\";\nimport { Platform } from \"./utils/platform\";\nimport { MainScene } from \"./modules/main/main-scene\";\nimport { BullScene } from \"./modules/bull/bull-scene\";\n\nexport class Main {\n\n    constructor() {\n        this.init();\n    }\n\n    async init() {\n        if (window[\"IS_WEB\"]) {\n            try {\n                window[\"require\"] = eval(\"__webpack_require__\");\n                for (let k in window[\"require\"].c) {\n                    window[\"require\"].c[\"../client\" + k.slice(2, k.length)] = window[\"require\"].c[k];\n                }\n            } catch (e) {\n\n            }\n            await orange.startup({\n                native: {\n                    ip: \"localhost\",//\"192.168.0.100\",//(new orange.URLUtil(window.location.href)).params[\"serverIp\"] || \"localhost\",\n                    autoCompile: true\n                }\n            });\n        }\n        leaf.init();\n        leaf.world.root.transform.scaleX = leaf.world.root.transform.scaleY = leaf.GLCore.width / 640;\n        leaf.Res.loadResources().then(() => {\n            leaf.Res.getRes(\"block_png\").load().then(\n                () => {\n                    new BullScene();\n                    // new MainScene();\n                    // new FaceScene(true);\n                    // new PuzzleScene();\n                }\n            )\n        })\n    }\n\n}\n\nwindow[\"Main\"] = Main;","import { ModuleScene } from \"../../utils/ui/module-scene\";\nimport { BullCore } from \"./components/bull-core\";\n\n@orange.autoload(\"BullScene\")\nexport class BullScene extends ModuleScene {\n\n    constructor() {\n        super();\n\n        ecs.Entity.create().addComponent(BullCore).parent = this.scene;\n    }\n\n}","import { RngSource } from \"./rng\";\n\norange.autoloadLink(\"BullScene\");\n\nexport class BullCore extends ecs.Component {\n\n    //比赛时间\n\n    time = 0;\n\n    runFlag: boolean\n\n    timeLabel: leaf.Label;\n\n    core: BullCoreData;\n\n    hp0: leaf.Label;\n\n    hp1: leaf.Label;\n\n    init() {\n        this.transform.x = 0;\n        this.transform.y = 250;\n        this.runFlag = true;\n\n        let start = ecs.Entity.create().addComponent(leaf.Bitmap);\n        start.texture = leaf.PointTexture.getTexture(0xff0000);\n        start.transform.scaleX = 640;\n        start.transform.scaleY = 1;\n        start.transform.y = this.transform.y;\n        start.parent = leaf.world.scene;\n\n        this.hp0 = ecs.Entity.create().addComponent(leaf.Label);\n        this.hp0.text = \"?\";\n        this.hp0.transform.x = 400;\n        this.hp0.parent = leaf.world.scene;\n\n        this.hp1 = ecs.Entity.create().addComponent(leaf.Label);\n        this.hp1.text = \"?\";\n        this.hp1.transform.x = 400;\n        this.hp1.transform.y = 1200;\n        this.hp1.parent = leaf.world.scene;\n\n\n        this.timeLabel = ecs.Entity.create().addComponent(leaf.Label);\n        this.timeLabel.fontColor = 0xffffff;\n        this.timeLabel.parent = leaf.world.scene;\n\n        let core = window[\"core\"] = this.core = new BullCoreData(4);\n        core.raceLength = 800 * 1000;\n        core.raceTime = 300 * 1000;\n\n        core.lengthWeight = [60, 60, 30, 10, 10];\n        core.normalSpeeds = [150, 150, 150, 150, 150];\n        core.bigSpeeds = [100, 100, 100, 100, 100];\n        core.lengths = [68000, 87000, 104000, 105000, 105000];\n        core.strengths = [1, 2, 3, 4, 4];\n        core.atks = [4, 3, 2, 1, 1];\n        core.extraAtks = [6, 4, 2, 1, 1];\n        core.extraAtksWeight = [50, 50, 50, 50, 50];\n        core.suckBlood = [1, 1, 1, 1];\n        core.suckBloodWeight = [50, 50, 50, 50, 50];\n        core.skills = [0, 0, 0, 0, 9];\n        core.shield = 3;\n        core.equalsPush = 1;\n\n        core.lengthWeight1 = [60, 60, 30, 10, 10];\n        core.normalSpeeds1 = [150, 150, 150, 150, 150];\n        core.bigSpeeds1 = [100, 100, 100, 100, 100];\n        core.lengths1 = [68000, 87000, 104000, 105000, 105000];\n        core.strengths1 = [1, 2, 3, 4, 4];\n        core.atks1 = [4, 3, 2, 1, 1];\n        core.extraAtks1 = [6, 4, 2, 1, 1];\n        core.extraAtksWeight1 = [50, 50, 50, 50, 50];\n        core.suckBlood1 = [1, 1, 1, 1];\n        core.suckBloodWeight1 = [50, 50, 50, 50, 50];\n        core.skills1 = [0, 0, 0, 0, 9];\n        core.shield1 = 0;\n\n        core.teamHps = [10000, 10000];\n        // core.ops = [\n        //     { time: 0, team: 0, raceIndex: 0, type: 0 },\n        //     { time: 0, team: 0, raceIndex: 0, type: 0 },\n        //     { time: 0, team: 1, raceIndex: 0, type: 0 },\n        //     { time: 1500, team: 0, raceIndex: 0, type: 1 },\n        //     { time: 2000, team: 1, raceIndex: 0, type: 2 }\n        // ] as any;\n        core.ops = [];\n        //第一个赛道放，每隔 3 ~ 5 秒放入一头牛 team0\n        let time = ~~(5000 * Math.random());\n        while (time < core.raceTime) {\n            core.ops.push({ time: time, team: 0, raceIndex: 0, type: ~~(5 * Math.random()) });\n            time += 3000 + ~~(Math.random() * 2000);\n        }\n        //第二个赛道放，每隔 3 ~ 5 秒放入一头牛 team1\n        time = ~~(5000 * Math.random());\n        while (time < core.raceTime) {\n            core.ops.push({ time: time, team: 1, raceIndex: 1, type: ~~(5 * Math.random()) });\n            time += 3000 + Math.random() * 2000;\n        }\n        //第3个赛道放，每隔 1 ~ 2 秒放入一头牛 team0 team1\n        time = ~~(5000 * Math.random());\n        while (time < core.raceTime) {\n            core.ops.push({ time: time, team: 0, raceIndex: 2, type: ~~(5 * Math.random()) });\n            time += 1000 + ~~(Math.random() * 1000);\n        }\n        time = ~~(5000 * Math.random());\n        while (time < core.raceTime) {\n            core.ops.push({ time: time, team: 1, raceIndex: 2, type: ~~(5 * Math.random()) });\n            time += 1000 + ~~(Math.random() * 1000);\n        }\n        //第4个赛道放，每隔 3 ~ 5 秒放入一头牛 team0 team1\n        time = ~~(5000 * Math.random());\n        while (time < core.raceTime) {\n            core.ops.push({ time: time, team: 0, raceIndex: 3, type: ~~(5 * Math.random()) });\n            time += 3000 + ~~(Math.random() * 2000);\n        }\n        time = ~~(5000 * Math.random());\n        while (time < core.raceTime) {\n            core.ops.push({ time: time, team: 1, raceIndex: 3, type: ~~(5 * Math.random()) });\n            time += 3000 + ~~(Math.random() * 2000);\n        }\n\n\n        core.ops = [\n            { time: 0, team: 0, raceIndex: 0, type: 2 },\n            // { time: 0, team: 0, raceIndex: 0, type: 0 },\n            // { time: 4000, team: 0, raceIndex: 0, type: 1 },\n            // { time: 6000, team: 0, raceIndex: 0, type: 4 },\n            { time: 0, team: 1, raceIndex: 0, type: 3 },\n            // { time: 3000, team: 1, raceIndex: 0, type: 1 }\n        ] as any;\n\n        core.ops.sort((a, b) => a.time - b.time);\n        let end = ecs.Entity.create().addComponent(leaf.Bitmap);\n        end.texture = leaf.PointTexture.getTexture(0x00ff00);\n        end.transform.scaleX = 640;\n        end.transform.scaleY = 1;\n        end.transform.y = this.transform.y + core.raceLength / 1000;\n        end.parent = leaf.world.scene;\n\n        let mid = ecs.Entity.create().addComponent(leaf.Bitmap);\n        mid.texture = leaf.PointTexture.getTexture(0x0000ff);\n        mid.transform.scaleX = 640;\n        mid.transform.scaleY = 1;\n        mid.transform.y = this.transform.y + 0.5 * core.raceLength / 1000;\n        mid.parent = leaf.world.scene;\n\n        this.runFlag = false;\n\n        setTimeout(() => {\n            this.runFlag = true;\n            // this.time = 275000;\n        }, 200)\n\n        setTimeout(() => {\n            core.ops.push({ time: 1000, team: 0, raceIndex: 0, type: 0 });\n        }, 4000);\n    }\n\n    update() {\n        if (!this.runFlag) return;\n        this.time += 16;\n        this.timeLabel.text = ~~(this.time / 1000) + '/' + (this.core.raceTime / 1000);\n        let [win, teamHps, other] = this.runBullGame(\n            this.core,\n            //+ 300 * 1000\n            Math.min(this.time, this.core.raceTime * 1000));\n\n        let [bullTypes, bullTeams, bullYs, lens, raceIndexs, starts, ends] = other;\n        let bulls = [];\n        for (let i = 0; i < bullTypes.length; i++) {\n            bulls.push({\n                type: bullTypes[i],\n                team: bullTeams[i],\n                length: lens[i],\n                y: bullYs[i],\n                race: raceIndexs[i],\n                ice: !!this.core.races[raceIndexs[i]].ices[bullTeams[i]]\n            });\n        }\n        if (teamHps[0] <= 0 || teamHps[1] <= 0 || this.time >= this.core.raceTime * 1000) {\n            this.runFlag = false;\n            console.error(\"winner\", teamHps[0] > teamHps[1] ? 0 : 1);\n        }\n        this.render(bulls, starts, ends);\n    }\n\n    /**\n     * \n     * @param ops 操作列表，每个元素包含 操作的时间、队伍(0|1) 牛的类型\\\n     * @param raceCount 赛道数量\n     * @param raceLength 赛道长度\n     * @param normalSpeeds 正常速度\n     * @param winSpeeds 撞到一起后赢的速度\n     * @param specialSpeed 特殊速度\n     * @param teamHps 队伍(0|1)的 hp \n     * @param lens 牛的长度，牛的 type 作为索引\n     * @param strengths 牛的力量，牛的 type 作为索引\n     * @param atks 牛的攻击，牛的 type 作为索引\n     * @param skills 牛的技能，牛的 type 作为索引\n     * skill 0 无技能\n     * skill 1 抵达终点有概率造成双倍伤害 ok\n     * skill 2 开局额外获得 10 点血 \n     * skill 3 开局额外获得 3 个护盾  \n     * skill 4 抵达终点有概率吸血  ok\n     * skill 5 更容易出现 XL 体型的牛  ok\n     * skill 6 双方体重相同时可以推动对手   ok\n     * skill 7 同一赛道的牛越多，速度越快 ok\n     * skill 8 上场时，冰冻对手 3 秒，并且临时置对方的力量为 0 ok\n     * skill 9 上场时，清空前面的牛，包含对方的和自己的 ok\n     * @param time 比赛时间\n     */\n    runBullGame(core: BullCoreData, time: number): [number, number[], any] {\n\n        let curTime: number = core.time;\n        let hasNew = false;\n        while (core.winTeam === -1 && (curTime < time || hasNew && curTime === time)) {\n            core.loop++;\n            hasNew = false;\n            //预测下一个事件点\n            let realTime = curTime;\n            curTime += 1000 * 1000;\n            //解冻\n            for (let race of core.races) {\n                for (let ice of race.ices) {\n                    if (ice) {\n                        curTime = Math.min(curTime, ice);\n                    }\n                }\n            }\n            //操作事件\n            if (core.opIndex < core.ops.length) {\n                let op = core.ops[core.opIndex];\n                if (op.time <= curTime) {\n                    curTime = Math.ceil(op.time / 16) * 16;\n                }\n                if (op.time <= time) hasNew = true;\n            }\n            //获取每个赛道的下个时间点\n            for (let race of core.races) {\n                race.time = realTime + 1000 * 1000;\n                for (let i = 0; i < race.bulls.length; i++) {\n                    let bull = race.bulls[i];\n                    let nextBull = i < race.bulls.length - 1 ? race.bulls[i + 1] : null;\n                    race.time = Math.min(\n                        race.time,\n                        this.getBullToEndTime(realTime, bull.speed, bull.dir === 0 ? core.raceLength - bull.start + core.lenMap[bull.ids[bull.ids.length - 1]] : 0 - bull.end - core.lenMap[bull.ids[0]]),\n                        nextBull ? this.getBullToEndTime(realTime, bull.speed - nextBull.speed, (bull.dir === 0 ? nextBull.end : nextBull.start) - (bull.dir === 0 ? bull.start : bull.end)) : race.time\n                    )\n                }\n                curTime = Math.min(curTime, race.time, time);\n            }\n            //解冻\n            for (let race of core.races) {\n                for (let i = 0; i < race.ices.length; i++) {\n                    if (race.ices[i] && race.ices[i] <= curTime) {\n                        hasNew = true;\n                        race.ices[i] = 0;\n                        for (let bull of race.bulls) {\n                            bull.updateStrength(core);\n                            bull.updateSpeed(core);\n                        }\n                    }\n                }\n            }\n            //执行操作\n            if (core.opIndex < core.ops.length && core.ops[core.opIndex].time <= curTime) {\n                hasNew = true;\n                this.createBull(core, curTime);\n            }\n            //移动牛\n            if (curTime > realTime) {\n                for (let race of core.races) {\n                    for (let bull of race.bulls) {\n                        bull.end += bull.speed * (curTime - bull.time);\n                        bull.start += bull.speed * (curTime - bull.time);\n                        bull.time = curTime;\n                    }\n                }\n            }\n            //碰撞\n            for (let race of core.races) {\n                for (let i = 0; i < race.bulls.length; i++) {\n                    let bull = race.bulls[i];\n                    if (i < race.bulls.length - 1 && bull.start >= race.bulls[i + 1].end) {\n                        hasNew = true;\n                        let nextBull = race.bulls[i + 1];\n                        race.bulls.splice(i, 1);\n                        i--;\n                        for (let nid of nextBull.ids) {\n                            bull.ids.push(nid);\n                        }\n                        nextBull.ids = bull.ids;\n                        nextBull.end = bull.end + nextBull.end - bull.start;\n                        nextBull.updateStrength(core);\n                        nextBull.updateSpeed(core);\n                    } else {\n                        let bullId: number = - 1;\n                        if (bull.speed > 0 && bull.start - core.lenMap[bull.ids[bull.ids.length - 1]] >= core.raceLength) {\n                            hasNew = true;\n                            bullId = bull.ids.pop();\n                            bull.start = bull.end;\n                            for (let j = 0; j < bull.ids.length; j++) {\n                                bull.start += core.lenMap[bull.ids[j]];\n                            }\n                            if (bull.ids.length === 1) {\n                                if (core.teamMap[bull.ids[0]] === 0) {\n                                    bull.speed = race.ices[core.teamMap[bull.ids[0]]] ? 0 : core.normalSpeeds[core.typeMap[bull.ids[0]]];\n                                } else {\n                                    bull.speed = race.ices[core.teamMap[bull.ids[0]]] ? 0 : -core.normalSpeeds1[core.typeMap[bull.ids[0]]];\n                                }\n                            }\n                            this.bullAttack(core, bullId, 1, curTime);\n                        } else if (bull.speed < 0 && bull.end + core.lenMap[bull.ids[0]] <= 0) {\n                            hasNew = true;\n                            bullId = bull.ids.shift();\n                            bull.end = bull.start;\n                            for (let j = bull.ids.length - 1; j >= 0; j--) {\n                                bull.end -= core.lenMap[bull.ids[j]];\n                            }\n                            if (bull.ids.length === 1) {\n                                if (core.teamMap[bull.ids[0]] === 0) {\n                                    bull.speed = race.ices[core.teamMap[bull.ids[0]]] ? 0 : core.normalSpeeds[core.typeMap[bull.ids[0]]];\n                                } else {\n                                    bull.speed = race.ices[core.teamMap[bull.ids[0]]] ? 0 : -core.normalSpeeds1[core.typeMap[bull.ids[0]]];\n                                }\n                            }\n                            this.bullAttack(core, bullId, 0, curTime);\n                        }\n                        if (bullId >= 0 && !bull.ids.length) {\n                            race.bulls.splice(i, 1);\n                            i--;\n                        }\n                    }\n                    if (core.winTeam >= 0) break;\n                }\n                if (core.winTeam >= 0) break;\n            }\n            if (core.winTeam >= 0) break;\n        }\n        core.time = curTime;\n        return [core.winTeam, core.teamHps, this.getBullShow(core.races, core.teamMap, core.typeMap, core.lengths, core.lengths1)];\n    }\n\n    createBull(core: BullCoreData, curTime: number) {\n        let op = core.ops[core.opIndex++];\n        let type: number = op.type;\n        core.typeMap[core.id] = type;\n        core.teamMap[core.id] = op.team;\n        if (op.team === 0) {\n            let bulls = core.races[op.raceIndex].bulls;\n            let length: number = core.lenMap[core.id] = core.lengths[type];\n            if (!bulls.length || bulls[0].end > 0) {\n                let bull = new Bull();\n                bull.time = curTime;\n                bull.raceIndex = op.raceIndex;\n                core.atkMap[core.id] = core.atks[type];\n                core.skillMap[core.id] = core.skills[type];\n                core.strengthMap[core.id] = core.strengths[type];\n                bull.ids.splice(0, 0, core.id++);\n                bull.start = 0;\n                bull.end = -length;\n                bull.dir = 0;\n                bull.updateStrength(core);\n                bull.updateSpeed(core);\n                if (core.skills[type] === 8) { //冰冻\n                    let race = core.races[op.raceIndex];\n                    race.ices[1] = curTime + 3000;\n                    for (let bull of race.bulls) {\n                        bull.updateStrength(core);\n                        bull.updateSpeed(core);\n                    }\n                } else if (core.skills[type] === 9) { //清空前面所有的牛\n                    core.races[op.raceIndex].bulls.length = 0;\n                }\n                bulls.splice(0, 0, bull);\n            }\n        } else {\n            let bulls = core.races[op.raceIndex].bulls;\n            let length: number = core.lenMap[core.id] = core.lengths1[type];\n            if (!bulls.length || bulls[bulls.length - 1].start < core.raceLength - length) {\n                let bull = new Bull();\n                bull.time = curTime;\n                bull.raceIndex = op.raceIndex;\n                core.atkMap[core.id] = core.atks1[type];\n                core.skillMap[core.id] = core.skills1[type];\n                core.strengthMap[core.id] = -core.strengths1[type];\n                bull.ids.push(core.id++);\n                bull.start = core.raceLength + length;\n                bull.end = core.raceLength;\n                bull.dir = 1;\n                bull.updateStrength(core);\n                bull.updateSpeed(core);\n                if (core.skills[type] === 8) { //冰冻\n                    let race = core.races[op.raceIndex];\n                    race.ices[0] = curTime + 3000;\n                    for (let bull of race.bulls) {\n                        bull.updateStrength(core);\n                        bull.updateSpeed(core);\n                    }\n                } else if (core.skills[type] === 9) { //清空前面所有的牛\n                    core.races[op.raceIndex].bulls.length = 0;\n                }\n                bulls.push(bull);\n            }\n        }\n    }\n\n    /**\n     * 客户端用于计算牛的位置的代码\n     * @param races \n     * @param teamMap \n     * @param typeMap \n     * @param lengths \n     * @param lengths1 \n     */\n    getBullShow(races, teamMap, typeMap, lengths, lengths1) {\n        let types: number[] = [];\n        let teams: number[] = [];\n        let lens: number[] = [];\n        let ys: number[] = [];\n        let raceIndexs: number[] = [];\n        let starts: number[] = [];\n        let ends: number[] = [];\n        for (let race of races) {\n            for (let bull of race.bulls) {\n                let y = bull.end;\n                starts.push(bull.start);\n                ends.push(bull.end);\n                for (let id of bull.ids) {\n                    let len = teamMap[id] === 0 ? lengths[typeMap[id]] : lengths1[typeMap[id]];\n                    types.push(typeMap[id]);\n                    teams.push(teamMap[id]);\n                    lens.push(len);\n                    ys.push(y + (teamMap[id] === 0 ? len : 0));\n                    raceIndexs.push(race.index);\n                    y += len;\n                }\n            }\n        }\n        return [types, teams, ys, lens, raceIndexs, starts, ends];\n    }\n\n    bullAttack(core: BullCoreData, bullId: number, beAttackedTeam: number, time: number) {\n        let extraAtk = 0;\n        let type = core.typeMap[bullId];\n        let r = this.getRandom(time);\n        if (core.teamMap[bullId] === 0) {\n            if (r * 100 < core.extraAtksWeight[type]) {\n                extraAtk = core.extraAtks[type];\n            }\n        } else {\n            if (r * 100 < core.extraAtksWeight1[type]) {\n                extraAtk = core.extraAtks1[type];\n            }\n        }\n        let suckBlood = 0;\n        if (core.teamMap[bullId] === 0 && beAttackedTeam === 1) {\n            if (r * 100 < core.suckBloodWeight[type]) {\n                suckBlood = core.suckBlood[type];\n            }\n        } else if (core.teamMap[bullId] === 1 && beAttackedTeam === 0) {\n            if (r * 100 < core.suckBloodWeight1[type]) {\n                suckBlood = core.suckBlood1[type];\n            }\n        }\n        if (beAttackedTeam === 0) {\n            if (core.shield) {\n                core.shield--;\n            } else {\n                core.teamHps[0] -= core.atkMap[bullId] + extraAtk;\n                if (core.teamHps[0] <= 0) core.winTeam = 1;\n                if (suckBlood) core.teamHps[1] += suckBlood;\n            }\n        } else {\n            core.teamHps[1] -= core.atkMap[bullId] + extraAtk;\n            if (core.teamHps[1] <= 0) core.winTeam = 0;\n            if (suckBlood) core.teamHps[0] += suckBlood;\n        }\n    }\n\n    getRandom(time: number) {\n        return (time % 1000) / 1000; // float 0 ~ 0.999\n    }\n\n    random(time: number, weights: number[]): number {\n        let r = (time % 1000) / 1000; // float 0 ~ 0.999\n        let s: number = 0; //weight sum\n        for (let i = 0; i < weights.length; i++) {\n            s += weights[i];\n        }\n        r = ~~(r * s); //int 0 ~ s - 1\n        for (let i = 0; i < weights.length; i++) {\n            if (r < weights[i]) return i;\n        }\n        return weights.length - 1;\n    }\n\n    /**\n     * 计算出牛啥时候到达终点\n     * @param curTime \n     * @param strength \n     * @param y \n     * @param speed \n     * @param endPos \n     */\n    getBullToEndTime(curTime: number, speed: number, distance: number): number {\n        let timeGap: number = 16;\n        let time: number = curTime + 1000 * 1000;\n        if (!speed) return time;\n        if (!distance) return curTime;\n        if (distance > 0 && speed < 0 || distance < 0 && speed > 0) return time;\n        let minPos: number = 0;\n        let maxPos: number = 2048; //牛最慢 2048 * timeGap 毫秒到达终点\n        //~~ 取整\n        let timePos: number = ~~((minPos + maxPos) / 2);\n        let count: number = 0;\n        while (count < 13) {\n            count++;\n            let pos = timePos * timeGap * speed;\n            if (distance > 0) {\n                if (pos >= distance && (timePos - 1) * timeGap * speed < distance) {\n                    time = curTime + timePos * timeGap;\n                    break\n                }\n                if (pos < distance) {\n                    minPos = timePos;\n                    timePos = ~~((minPos + maxPos) / 2);\n                    if (timePos === minPos) {\n                        timePos = maxPos;\n                        break;\n                    }\n                } else {\n                    maxPos = timePos;\n                    timePos = ~~((minPos + maxPos) / 2);\n                    if (timePos === minPos) {\n                        timePos = minPos;\n                        break;\n                    }\n                }\n            } else {\n                if (pos <= distance && (timePos - 1) * timeGap * speed > distance) {\n                    time = curTime + timePos * timeGap;\n                    break\n                }\n                if (pos > distance) {\n                    minPos = timePos;\n                    timePos = ~~((minPos + maxPos) / 2);\n                    if (timePos === minPos) {\n                        timePos = maxPos;\n                        break;\n                    }\n                } else {\n                    maxPos = timePos;\n                    timePos = ~~((minPos + maxPos) / 2);\n                    if (timePos === minPos) {\n                        timePos = minPos;\n                        break;\n                    }\n                }\n            }\n        }\n        return time;\n    }\n\n    render(bulls: {\n        id: number, type: number, team: number, y: number, length: number, race: number, ice: boolean\n    }[], starts: number[], ends: number[]) {\n        this.hp0.text = this.core.teamHps[0] + '';\n        this.hp1.text = this.core.teamHps[1] + '';\n        let offsets = {\n            \"bull1-1-1_png\": 17,\n            \"bull1-2-1_png\": 12,\n            \"bull1-4-1_png\": 13,\n            \"bull1-5-1_png\": 13\n        }\n        let offsetx = {\n            0: -86 / 2,\n            1: -106 / 2,\n            2: -141 / 2,\n            3: -166 / 2,\n            4: -166 / 2\n        }\n        while (this.entity.children.length) {\n            this.entity.children[0].destroy();\n        }\n        for (let n of starts) {\n            let l = ecs.Entity.create().addComponent(leaf.Bitmap);\n            l.texture = leaf.PointTexture.getTexture(0xff0000);\n            l.transform.y = n / 1000;\n            l.transform.scaleX = 100;\n            l.parent = this.entity;\n        }\n        for (let n of ends) {\n            let l = ecs.Entity.create().addComponent(leaf.Bitmap);\n            l.texture = leaf.PointTexture.getTexture(0x00ff00);\n            l.transform.y = n / 1000;\n            l.transform.scaleX = 100;\n            l.parent = this.entity;\n        }\n        let list = bulls.concat();\n        list.sort((a, b) => (a.team === 0 ? a.y : a.y + a.length) - (b.team === 0 ? b.y : b.y + b.length));\n        for (let i = 0; i < list.length; i++) {\n            let b = ecs.Entity.create().addComponent(leaf.Bitmap);\n            let src = `bull1-${list[i].type + 1}-${list[i].team}_png`;\n            b.resource = src;\n            b.parent = this.entity;\n            if (list[i].ice) b.tint = 0x8888ff;\n            b.transform.x = list[i].race * 150 + (offsetx[list[i].type] || 0) + 80;\n            b.transform.y = list[i].y / 1000 + (-offsets[src] || 0) + (list[i].team === 0 ? -list[i].length / 1000 : 0);\n        }\n    }\n\n}\n\nclass BullCoreData {\n\n    /**\n     * 冰冻冷却\n     */\n    ice_cd = 3000;\n\n    ops: { time: number, team: number, raceIndex: number, type: number }[];\n    raceLength: number;\n    raceTime: number; //比赛总时长\n\n    lengthWeight: number[];\n    normalSpeeds: number[];\n    bigSpeeds: number[];\n    lengths: number[];\n    strengths: number[];\n    atks: number[];\n    extraAtks: number[];\n    extraAtksWeight: number[];\n    suckBlood: number[];\n    suckBloodWeight: number[];\n    skills: number[];\n    shield: number;\n\n    lengthWeight1: number[];\n    normalSpeeds1: number[];\n    bigSpeeds1: number[];\n    lengths1: number[];\n    strengths1: number[];\n    atks1: number[];\n    extraAtks1: number[];\n    extraAtksWeight1: number[];\n    suckBlood1: number[];\n    suckBloodWeight1: number[];\n    skills1: number[];\n    shield1: number;\n\n    //力量相同时谁推动 -1 0 1 \n    equalsPush: number;\n\n    /**\n     * 执行了多少次\n     */\n    loop: number = 0;\n    time: number = 0;\n    opIndex: number = 0;\n    id: number = 0;\n    winTeam: number = -1;\n    teamHps: number[];\n    typeMap: { [index: number]: number } = {};\n    teamMap: { [index: number]: number } = {};\n    lenMap: { [index: number]: number } = {};\n    strengthMap: { [index: number]: number } = {};\n    // iceMap: { [index: number]: number } = {};\n    atkMap: { [index: number]: number } = {};\n    skillMap: { [index: number]: number } = {};\n    //牛的4个动态属性 id、单头牛的长度、合起来后的长度、队伍、坐标、速度、数量、解冻的绝对时间\n    races: Race[] = [];\n\n    constructor(raceCount: number) {\n        for (let i = 0; i < raceCount; i++) {\n            this.races[i] = new Race();\n            this.races[i].index = i;\n        }\n    }\n}\n\nclass Race {\n    public index: number;\n    public bulls: Bull[] = [];\n    public time: number = 0;\n    //team0 被冰冻结束时间\n    public ices: number[] = [0, 0];\n}\n\nclass Bull {\n\n    public raceIndex: number;\n\n    public ids: number[] = [];\n\n    public start: number = 0;\n    public end: number = 0;\n    public dir: number = 0;\n\n    public time: number = 0;\n\n    public speed: number = 0;\n\n    public strength: number = 0;\n\n    updateStrength(core: BullCoreData) {\n        let strength = 0;\n        for (let id of this.ids) {\n            if (core.teamMap[id] === 0) {\n                if (!core.races[this.raceIndex].ices[0]) {\n                    strength += core.strengthMap[id];\n                }\n            } else {\n                if (!core.races[this.raceIndex].ices[1]) {\n                    strength += core.strengthMap[id];\n                }\n            }\n        }\n        if (this.ids.length === 1) this.dir = core.teamMap[this.ids[0]];\n        else this.dir = strength >= 0 ? 0 : 1;\n        this.strength = strength;\n    }\n\n    updateSpeed(core: BullCoreData) {\n        let bull = this;\n        bull.speed = 0;\n        if (bull.strength || core.equalsPush != -1) {\n            let c = 0;\n            for (let id of bull.ids) {\n                if (core.teamMap[id] === bull.dir || !bull.strength && core.teamMap[id] === core.equalsPush) {\n                    c++;\n                }\n            }\n            if (c) {\n                let speeds = bull.ids.length > 1 ? (this.strength > 0 || this.strength === 0 && core.equalsPush === 0 ? core.bigSpeeds : core.bigSpeeds1) : (this.strength >= 0 ? core.normalSpeeds : core.normalSpeeds1);\n                bull.speed = (bull.strength > 0 || bull.strength === 0 && core.equalsPush === 0 ? 1 : -1) * speeds[Math.min(speeds.length, c) - 1];\n            }\n        }\n    }\n}","export class ModuleScene {\n\n    scene: ecs.Scene;\n\n    static instance: ModuleScene;\n\n    constructor(scrollSpeed: number = 1) {\n        ModuleScene.instance = this;\n        if (leaf.world.scene) {\n            leaf.world.scene.destroy();\n        }\n        this.scene = new ecs.Scene();\n        leaf.world.scene = this.scene;\n\n        // let bg = ecs.Entity.create().addComponent(leaf.Bitmap);\n        // bg.texture = leaf.PointTexture.getTexture(0x3f459f);//\"blue-bg_png\";\n        // bg.parent = this.scene;\n        // bg.transform.scaleX = leaf.getStageWidth();\n        // bg.transform.scaleY = leaf.getStageHeight();\n\n        // let scale = 90 / 274;\n        // let w = 90;\n        // let h = scale * 292;\n        // for (let y = 0; y < Math.ceil(leaf.getStageHeight() / h); y++) {\n        //     for (let x = 0; x < Math.ceil(leaf.getStageWidth() / w); x++) {\n        //         let sc = ecs.Entity.create().addComponent(leaf.ScrollBitmap);\n        //         sc.resource = \"blue-bg-scroller_png\";\n        //         sc.parent = this.scene;\n        //         sc.transform.scaleX = sc.transform.scaleY = scale;\n        //         sc.transform.x = w * x;\n        //         sc.transform.y = h * y;\n        //         sc.transform.alpha = 0.35;\n        //         sc.addComponent(Scroll, scrollSpeed);\n        //     }\n        // }\n\n    }\n\n    close() {\n        if (this.scene) {\n            if (this.scene.world) {\n                this.scene.world.scene = null;\n            }\n            this.scene.destroy();\n            this.scene = null;\n        }\n    }\n\n}\n\nclass Scroll extends ecs.Component {\n\n    scrollSpeed: number;\n\n    init(scrollSpeed: any) {\n        this.scrollSpeed = scrollSpeed;\n    }\n\n    update() {\n        let sc = this.getComponent(leaf.ScrollBitmap);\n        sc.scrollX += 0.005 * this.scrollSpeed;\n        sc.scrollY -= 0.005 * this.scrollSpeed;\n    }\n\n}"],"sourceRoot":""}