{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///../src/main.ts","webpack:///../src/modules/bull/bull-scene.ts","webpack:///../src/modules/bull/components/bull-core.ts","webpack:///../src/utils/ui/module-scene.ts"],"names":[],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"../src/main.ts\");\n","import { FaceScene } from \"./modules/puzzle/face/face-scene\";\nimport { PuzzleScene } from \"./modules/puzzle/puzzle-scene\";\nimport { PuzzleScriptScene } from \"./modules/puzzle-script/puzzle-script-scene\";\nimport { PlayerData } from \"./net/player-data\";\nimport { Platform } from \"./utils/platform\";\nimport { MainScene } from \"./modules/main/main-scene\";\nimport { BullScene } from \"./modules/bull/bull-scene\";\n\nexport class Main {\n\n    constructor() {\n        this.init();\n    }\n\n    async init() {\n        if (window[\"IS_WEB\"]) {\n            try {\n                window[\"require\"] = eval(\"__webpack_require__\");\n                for (let k in window[\"require\"].c) {\n                    window[\"require\"].c[\"../client\" + k.slice(2, k.length)] = window[\"require\"].c[k];\n                }\n            } catch (e) {\n\n            }\n            await orange.startup({\n                native: {\n                    ip: \"localhost\",//\"192.168.0.100\",//(new orange.URLUtil(window.location.href)).params[\"serverIp\"] || \"localhost\",\n                    autoCompile: true\n                }\n            });\n        }\n        leaf.init();\n        leaf.world.root.transform.scaleX = leaf.world.root.transform.scaleY = leaf.GLCore.width / 640;\n        leaf.Res.loadResources().then(() => {\n            leaf.Res.getRes(\"block_png\").load().then(\n                () => {\n                    new BullScene();\n                    // new MainScene();\n                    // new FaceScene(true);\n                    // new PuzzleScene();\n                }\n            )\n        })\n    }\n\n}\n\nwindow[\"Main\"] = Main;","import { ModuleScene } from \"../../utils/ui/module-scene\";\nimport { BullCore } from \"./components/bull-core\";\n\n@orange.autoload(\"BullScene\")\nexport class BullScene extends ModuleScene {\n\n    constructor() {\n        super();\n\n        ecs.Entity.create().addComponent(BullCore).parent = this.scene;\n    }\n\n}","import { RngSource } from \"./rng\";\n\norange.autoloadLink(\"BullScene\");\n\nexport class BullCore extends ecs.Component {\n\n    //比赛时间\n    raceTime: number = 30;\n    raceLength = 500 * 1000;\n    normalSpeed: number = 100;\n    winSpeed: number = 50;\n    specialSpeed: number = 200;\n    lengths = [64, 100 - 13, 107 - 3, 124 - 19];\n    strengths = [5, 10, 20, 40];\n    atks = [1, 2, 3, 4];\n    skills = [0, 0, 0, 0];\n    sizes = [1, 2, 3, 4];\n    ops: { time: number, type: number, team: number, raceIndex: number }[];\n\n    time = 0;\n\n    runFlag: boolean\n\n    init() {\n        // let rng = new RngSource();\n        // let str = \"\";\n        // // for (let i = 0; i < 100; i++) {\n        // //     rng.Seed(i);\n        // //     for (let c = 0; c < 10; c++) {\n        // //         str += rng.Int63() + \",\";\n        // //     }\n        // // }\n        // rng.Seed(0);\n        // console.error(rng.vec);\n        // return;\n        this.transform.x = 200;\n        this.transform.y = 150;\n        this.runFlag = true;\n    }\n\n    update() {\n        if (!this.runFlag) return;\n        this.time += 16;\n        let [win, teamHps, bullTypes, bullTeams, bullYs, lens] = this.runBullGame([\n            { time: 0, team: 0, raceIndex: 0 },\n            { time: 0, team: 1, raceIndex: 0 },\n        ],\n            4, this.raceLength,\n\n            [60, 60, 30, 10],\n            [150, 150, 150, 150],\n            [100, 100, 100, 100],\n            [84 - 16, 100 - 13, 107 - 3, 124 - 19],\n            [1, 2, 3, 4],\n            [4, 3, 2, 1],\n            [0, 0, 0, 0],\n\n            [60, 60, 30, 10],\n            [150, 150, 150, 150],\n            [100, 100, 100, 100],\n            [84 - 16, 100 - 13, 107 - 3, 124 - 19],\n            [1, 2, 3, 4],\n            [4, 3, 2, 1],\n            [0, 0, 0, 0],\n\n            [100, 100],\n\n            Math.min(this.time, this.raceTime * 1000));\n        let bulls = [];\n        for (let i = 0; i < bullTypes.length; i++) {\n            bulls.push({\n                type: bullTypes[i],\n                team: bullTeams[i],\n                length: lens[i],\n                y: bullYs[i]\n            });\n        }\n        if (teamHps[0] <= 0 || teamHps[1] <= 0 || this.time >= this.raceTime * 1000) {\n            this.runFlag = false;\n            console.error(\"winner\", teamHps[0] > teamHps[1] ? 0 : 1);\n        }\n        this.render(bulls);\n    }\n\n    /**\n     * \n     * @param ops 操作列表，每个元素包含 操作的时间、队伍(0|1) 牛的类型\\\n     * @param raceCount 赛道数量\n     * @param raceLength 赛道长度\n     * @param normalSpeeds 正常速度\n     * @param winSpeeds 撞到一起后赢的速度\n     * @param specialSpeed 特殊速度\n     * @param teamHps 队伍(0|1)的 hp \n     * @param lens 牛的长度，牛的 type 作为索引\n     * @param strengths 牛的力量，牛的 type 作为索引\n     * @param atks 牛的攻击，牛的 type 作为索引\n     * @param skills 牛的技能，牛的 type 作为索引\n     * skill 0 无技能\n     * skill 1 抵达终点有概率造成双倍伤害\n     * skill 2 开局额外获得 10 点血\n     * skill 3 开局额外获得 3 个护盾\n     * skill 4 抵达终点有概率吸血\n     * skill 5 更容易出现 XL 体型的牛\n     * skill 6 双方体重相同时可以推动对手\n     * skill 7 同一赛道的牛越多，速度越快\n     * skill 8 上场时，冰冻对手 3 秒，并且临时置对方的力量为 0\n     * skill 9 上场时，清空前面的牛，包含对方的和自己的\n     * @param time 比赛时间\n     */\n    runBullGame(\n        ops: { time: 0, team: number, raceIndex: number }[],\n        raceCount: number,\n        raceLength: number,\n\n        lengthWeight: number[],\n        normalSpeeds: number[],\n        bigSpeeds: number[],\n        lengths: number[],\n        strengths: number[],\n        atks: number[],\n        skills: number[],\n\n        lengthWeight1: number[],\n        normalSpeeds1: number[],\n        bigSpeeds1: number[],\n        lengths1: number[],\n        strengths1: number[],\n        atks1: number[],\n        skills1: number[],\n\n        teamHps: number[],\n        time: number): [number, number[], number[], number[], number[], number[]] {\n        //牛的 id 计数器\n        let id: number = 0;\n        let winTeam: number = -1;\n        let idTypeMap: { [index: number]: number } = {};\n        //牛的4个动态属性 id、单头牛的长度、合起来后的长度、队伍、坐标、速度、数量、解冻的绝对时间\n        let bullIds0: number[][][] = [];\n        let bullLengths0: number[][][] = [];\n        let bullMergeLengths0: number[][] = [];\n        let bullTeams0: number[][] = [];\n        let bullYs0: number[][] = [];\n        let bullSpeeds0: number[][] = [];\n        let bullCounts0: number[] = [];\n        let bullIces0: number[][][] = [];\n\n        let bullIds1: number[][][] = [];\n        let bullLengths1: number[][][] = [];\n        let bullMergeLengths1: number[][] = [];\n        let bullTeams1: number[][] = [];\n        let bullYs1: number[][] = [];\n        let bullSpeeds1: number[][] = [];\n        let bullCounts1: number[] = [];\n        let bullIces1: number[][][] = [];\n        //合体牛包含 id\n        let bigBullIds: number[][] = [];\n        //合体牛的长度\n        let bigBullLength: number[][] = [];\n        //合体牛每个的 team\n        let bigBullTeams: number[][] = [];\n        //合体牛的组合长度\n        let bigBullMergeLength: number[] = [];\n        //合体牛的力量 team0 strength 为正， team1 strength 为负\n        let bigBullStrength: number[] = [];\n        //合体牛的位置\n        let bigBullY: number[] = [];\n        //合体牛的速度\n        let bigBullSpeed: number[] = [];\n        //合体牛的方向 0|1 与  team 的牛方向相同\n        let bigBullDir: number[] = [];\n        //合体牛的冰冻时间\n        let bigBullIces: number[][] = [];\n        //每条赛道的时间\n        let raceTime: number[] = [];\n        for (let i = 0; i < raceCount; i++) {\n            bullIds0[i] = [];\n            bullLengths0[i] = [];\n            bullMergeLengths0[i] = [];\n            bullTeams0[i] = [];\n            bullYs0[i] = [];\n            bullSpeeds0[i] = [];\n            bullCounts0[i] = 0;\n            bullIces0[i] = [];\n            bullIds1[i] = [];\n            bullMergeLengths1[i] = [];\n            bullLengths1[i] = [];\n            bullTeams1[i] = [];\n            bullYs1[i] = [];\n            bullSpeeds1[i] = [];\n            bullIces1[i] = [];\n            bullCounts1[i] = 0;\n            bigBullIds[i] = [];\n            bigBullLength[i] = [];\n            bigBullTeams[i] = [];\n            bigBullMergeLength[i] = 0;\n            bigBullStrength[i] = 0;\n            bigBullY[i] = 0;\n            bigBullSpeed[i] = 0;\n            bigBullDir[i] = 0;\n            bigBullIces[i] = [];\n            raceTime[i] = 0;\n        }\n        //当前跨度\n        let curTime: number = 0;\n        //当前执行过的操作索引\n        let opIndex: number = 0;\n        let hasNew = true;\n\n        //最大执行次数\n        while (winTeam === -1 && (curTime < time || hasNew && curTime === time)) {\n            hasNew = false;\n            //预测下一个事件点\n            let realTime = curTime;\n            curTime += 1000 * 1000;\n            //操作事件\n            if (opIndex < ops.length) {\n                let op = ops[opIndex];\n                if (op.time <= curTime) {\n                    curTime = Math.ceil(op.time / 16) * 16;\n                }\n            }\n            for (let k = 0; k < raceCount; k++) {\n                raceTime[k] = realTime + 1000 * 1000;\n                for (let c = bullIds0[k].length - 1; c >= 0; c--) {\n                    if (c === 0) {\n                        raceTime[k] = Math.min(raceTime[k],\n                            this.getBullToEndTime(realTime, bullSpeeds0[k][c], raceLength - bullYs0[k][c]),\n                            this.getBullToEndTime(realTime, bigBullSpeed[k], raceLength),\n                            bigBullIds[k].length ? this.getBullToEndTime(realTime, bullSpeeds0[k][0] - bigBullSpeed[k], bigBullY[k] + (bigBullDir[k] === 0 ? -bigBullLength[k] : 0) - bullYs0[k][0]) : raceTime[k],\n                            bullIds1[k].length ? this.getBullToEndTime(realTime, bullSpeeds0[k][0] - bullSpeeds1[k][0], bullYs1[k][0] - bullYs0[k][0]) : raceTime[k],\n                        );\n                    } else {\n                        raceTime[k] = Math.min(raceTime[k],\n                            this.getBullToEndTime(realTime, bullSpeeds0[k][c], raceLength - bullYs0[k][c]),\n                            this.getBullToEndTime(realTime, bullSpeeds0[k][c] - bullSpeeds0[k][c - 1], bullYs0[k][c - 1] - bullMergeLengths0[k][c - 1] - bullYs0[k][c]),\n                        );\n                    }\n                }\n                for (let c = bullIds1[k].length - 1; c >= 0; c--) {\n                    if (c === 0) {\n                        raceTime[k] = Math.min(raceTime[k],\n                            this.getBullToEndTime(realTime, bullSpeeds1[k][c], - bullYs1[k][c]),\n                            this.getBullToEndTime(realTime, bigBullSpeed[k], 0),\n                            bigBullIds[k].length ? this.getBullToEndTime(realTime, bullSpeeds1[k][0] - bigBullSpeed[k], bigBullY[k] + (bigBullDir[k] === 0 ? - bigBullLength[k] : 0) - bullYs1[k][0]) : raceTime[k],\n                        );\n                    } else {\n                        raceTime[k] = Math.min(raceTime[k],\n                            this.getBullToEndTime(realTime, bullSpeeds1[k][c], - bullYs1[k][c]),\n                            this.getBullToEndTime(realTime, bullSpeeds1[k][c] - bullSpeeds1[k][c - 1], bullYs1[k][c - 1] - bullMergeLengths1[k][c - 1] - bullYs1[k][c]),\n                        );\n                    }\n                }\n                curTime = Math.min(curTime, raceTime[k], time);\n            }\n            if (opIndex < ops.length) {\n                hasNew = true;\n                let op = ops[opIndex++];\n                if (op.time <= curTime) { //放牛\n                    if (op.team === 0) {\n                        let type: number = this.random(curTime, lengthWeight);\n                        idTypeMap[id] = type;\n                        let length: number = lengths[type];\n                        bullIds0[op.raceIndex].push([id++]);\n                        bullLengths0[op.raceIndex].push([length]);\n                        bullMergeLengths0[op.raceIndex].push(length);\n                        bullTeams0[op.raceIndex].push(op.team);\n                        bullYs0[op.raceIndex].push(0);\n                        bullCounts0[op.raceIndex]++;\n                        bullSpeeds0[op.raceIndex].push(normalSpeeds[Math.min(normalSpeeds.length - 1, bullCounts0[op.raceIndex])]);\n                        bullIces0[op.raceIndex].push([0]);\n                        if (bigBullLength[op.raceIndex] && bigBullSpeed[op.raceIndex] > 0) bigBullSpeed[op.raceIndex] = bigSpeeds[Math.min(bigSpeeds.length - 1, bullCounts0[op.raceIndex])];\n                    } else {\n                        let type: number = this.random(curTime, lengthWeight1);\n                        idTypeMap[id] = type;\n                        let length: number = lengths1[type];\n                        bullIds1[op.raceIndex].push([id++]);\n                        bullLengths1[op.raceIndex].push([length]);\n                        bullMergeLengths1[op.raceIndex].push(length);\n                        bullTeams1[op.raceIndex].push(op.team);\n                        bullYs1[op.raceIndex].push(raceLength);\n                        bullCounts1[op.raceIndex]++;\n                        bullSpeeds1[op.raceIndex].push(-normalSpeeds1[Math.min(normalSpeeds1.length - 1, bullCounts1[op.raceIndex])]);\n                        bullIces1[op.raceIndex].push([0]);\n                        if (bigBullLength[op.raceIndex] && bigBullSpeed[op.raceIndex] < 0) bigBullSpeed[op.raceIndex] = -bigSpeeds1[Math.min(bigSpeeds1.length - 1, bullCounts1[op.raceIndex])];\n                    }\n                }\n            }\n            if (curTime > realTime) {\n                let timeGap = curTime - realTime;\n                for (let k = 0; k < raceCount; k++) {\n                    for (let c = bullIds0[k].length - 1; c >= 0; c--) {\n                        if (bullSpeeds0[k][c]) {\n                            bullYs0[k][c] += bullSpeeds0[k][c] * timeGap;\n                        }\n                    }\n                    for (let c = bullIds1[k].length - 1; c >= 0; c--) {\n                        if (bullSpeeds1[k][c]) {\n                            bullYs1[k][c] += bullSpeeds1[k][c] * timeGap;\n                        }\n                    }\n                }\n            }\n\n            for (let k = 0; k < raceCount; k++) {\n                for (let c = bullIds0[k].length - 1; c >= 0; c--) {\n                    if (c === 0) {\n                        if (bullSpeeds0[k][c]) {\n                            if (bigBullIds[k].length && (bigBullDir[k] === 0 && bigBullY[k] - bigBullMergeLength[k] <= bullYs0[k][0] || bigBullDir[k] === 1 && bigBullY[k] <= bullYs0[k][0])) { //与大牛合体\n\n                            } else if (bullIds0[k].length && bullYs1[k][0] <= bullYs0[k][0]) { //双牛对撞\n                                bullSpeeds0[k][0] = 0;\n                                bullSpeeds1[k][0] = 0;\n\n                                let ids = bullIds0[k].shift().reverse();\n                                let len0 = ids.length;\n                                bigBullIds[k] = ids;\n                                bigBullLength[k] = bullLengths0[k].shift().reverse();\n                                bullMergeLengths0[k].shift();\n                                for (let i = 0; i < ids.length; i++) {\n                                    bigBullTeams[k][i] = 0;\n                                }\n                                bullTeams0[k].shift();\n                                let posy0 = bullYs0[k].shift();\n                                bullSpeeds0[k].shift();\n                                bullCounts0[k] -= ids.length;\n                                bigBullIces[k] = bullIces0[k].shift().reverse();\n\n\n                                ids = bullIds1[k].shift();\n                                bigBullIds[k] = bigBullIds[k].concat(ids);\n                                bigBullLength[k] = bigBullLength[k].concat(bullLengths1[k].shift());\n                                bullMergeLengths1[k].shift();\n                                for (let i = 0; i < ids.length; i++) {\n                                    bigBullTeams[k][len0 + i] = 0;\n                                }\n                                bullTeams1[k].shift();\n                                let posy1 = bullYs1[k].shift();\n                                bullSpeeds1[k].shift();\n                                bullCounts1[k] -= ids.length;\n                                bigBullIces[k] = bigBullIces[k].concat(bullIces1[k].shift());\n\n                                bigBullSpeed[k] = 0;\n\n                                bigBullMergeLength[k] = 0;\n                                bigBullStrength[k] = 0;\n                                for (let i = 0; i < bigBullIds[k].length; i++) {\n                                    bigBullMergeLength[k] += bigBullLength[k][i];\n                                    // bigBullStrength[k] += \n                                }\n                                for (let i = 0; i < bigBullLength[k].length; i++) {\n                                    bigBullMergeLength[k] += bigBullLength[k][i];\n                                }\n\n                                // bigBullStrength[i] = 0;\n                                // bigBullY[i] = 0;\n                                // bigBullSpeed[i] = 0;\n                                // bigBullDir[i] = 0;\n                            }\n                        }\n                    } else {\n\n                    }\n                }\n                for (let c = bullIds1[k].length - 1; c >= 0; c--) {\n                    if (c === 0) {\n\n                    } else {\n\n                    }\n                }\n            }\n        }\n        let bulls: {\n            id: number, len: number, team: number, y: number\n        }[] = [];\n        let types: number[] = [];\n        let teams: number[] = [];\n        let lens: number[] = [];\n        let ys: number[] = [];\n        for (let r = 0; r < bullIds0.length; r++) {\n            for (let i = 0; i < bullIds0[r].length; i++) {\n                let y: number = bullYs0[r][i];\n                for (let j = 0; j < bullIds0[r][i].length; j++) {\n                    let id = bullIds0[r][i][j];\n                    types.push(idTypeMap[id]);\n                    teams.push(bullTeams0[r][i]);\n                    lens.push(lengths[idTypeMap[id]]);\n                    ys.push(y);\n                    y -= lengths[idTypeMap[id]];\n                }\n            }\n        }\n        for (let r = 0; r < bullIds1.length; r++) {\n            for (let i = 0; i < bullIds1[r].length; i++) {\n                let y: number = bullYs1[r][i];\n                for (let j = 0; j < bullIds1[r][i].length; j++) {\n                    let id = bullIds1[r][i][j];\n                    types.push(idTypeMap[id]);\n                    teams.push(bullTeams1[r][i]);\n                    lens.push(lengths1[idTypeMap[id]]);\n                    ys.push(y);\n                    y += lengths1[idTypeMap[id]];\n                }\n            }\n        }\n        return [winTeam, teamHps, types, teams, ys, lens];\n    }\n\n    bullAttack(atk: number, skill: number, teamHps: number[]) {\n\n    }\n\n    random(time: number, weights: number[]): number {\n        let r = (time % 1000) / 1000; // float 0 ~ 0.999\n        let s: number = 0; //weight sum\n        for (let i = 0; i < weights.length; i++) {\n            s += weights[i];\n        }\n        r = ~~(r * s); //int 0 ~ s - 1\n        for (let i = 0; i < weights.length; i++) {\n            if (r < weights[i]) return i;\n        }\n        return weights.length - 1;\n    }\n\n    /**\n     * 计算出牛啥时候到达终点\n     * @param curTime \n     * @param strength \n     * @param y \n     * @param speed \n     * @param endPos \n     */\n    getBullToEndTime(curTime: number, speed: number, distance: number): number {\n        let timeGap: number = 16;\n        let time: number = curTime + 1000 * 1000;\n        if (!speed) return time;\n        if (!distance) return curTime;\n        if (distance > 0 && speed < 0 || distance < 0 && speed > 0) return time;\n        let minPos: number = 0;\n        let maxPos: number = 2048; //牛最慢 2048 * timeGap 毫秒到达终点\n        //~~ 取整\n        let timePos: number = ~~((minPos + maxPos) / 2);\n        let count: number = 0;\n        while (count < 13) {\n            count++;\n            let pos = timePos * timeGap * speed;\n            if (distance > 0) {\n                if (pos >= distance && (timePos - 1) * timeGap * speed < distance) {\n                    time = curTime + timePos * timeGap;\n                    break\n                }\n                if (pos < distance) {\n                    minPos = timePos;\n                    timePos = ~~((minPos + maxPos) / 2);\n                    if (timePos === minPos) {\n                        timePos = maxPos;\n                        break;\n                    }\n                } else {\n                    maxPos = timePos;\n                    timePos = ~~((minPos + maxPos) / 2);\n                    if (timePos === minPos) {\n                        timePos = minPos;\n                        break;\n                    }\n                }\n            } else {\n                if (pos <= distance && (timePos - 1) * timeGap * speed > distance) {\n                    time = curTime + timePos * timeGap;\n                    break\n                }\n                if (pos > distance) {\n                    minPos = timePos;\n                    timePos = ~~((minPos + maxPos) / 2);\n                    if (timePos === minPos) {\n                        timePos = maxPos;\n                        break;\n                    }\n                } else {\n                    maxPos = timePos;\n                    timePos = ~~((minPos + maxPos) / 2);\n                    if (timePos === minPos) {\n                        timePos = minPos;\n                        break;\n                    }\n                }\n            }\n        }\n        return time;\n    }\n\n    render(bulls: {\n        id: number, type: number, team: number, y: number, length: number\n    }[]) {\n        let offsets = {\n            \"bull1-1-1_png\": 17,\n            \"bull1-2-1_png\": 12,\n            \"bull1-4-1_png\": 13,\n        }\n        while (this.entity.children.length) {\n            this.entity.children[0].destroy();\n        }\n        let list = bulls.concat();\n        list.sort((a, b) => (a.team === 0 ? a.y / 1000 : a.y / 1000 + a.length) - (b.team === 0 ? b.y / 1000 : b.y / 1000 + b.length));\n        for (let i = 0; i < list.length; i++) {\n            let b = ecs.Entity.create().addComponent(leaf.Bitmap);\n            let src = `bull1-${this.sizes[list[i].type]}-${list[i].team}_png`;\n            b.resource = src;\n            b.parent = this.entity;\n            b.transform.y = list[i].y / 1000 + (-offsets[src] || 0) + (list[i].team === 0 ? -list[i].length : 0);\n        }\n    }\n\n}","export class ModuleScene {\n\n    scene: ecs.Scene;\n\n    static instance: ModuleScene;\n\n    constructor(scrollSpeed: number = 1) {\n        ModuleScene.instance = this;\n        if (leaf.world.scene) {\n            leaf.world.scene.destroy();\n        }\n        this.scene = new ecs.Scene();\n        leaf.world.scene = this.scene;\n\n        // let bg = ecs.Entity.create().addComponent(leaf.Bitmap);\n        // bg.texture = leaf.PointTexture.getTexture(0x3f459f);//\"blue-bg_png\";\n        // bg.parent = this.scene;\n        // bg.transform.scaleX = leaf.getStageWidth();\n        // bg.transform.scaleY = leaf.getStageHeight();\n\n        // let scale = 90 / 274;\n        // let w = 90;\n        // let h = scale * 292;\n        // for (let y = 0; y < Math.ceil(leaf.getStageHeight() / h); y++) {\n        //     for (let x = 0; x < Math.ceil(leaf.getStageWidth() / w); x++) {\n        //         let sc = ecs.Entity.create().addComponent(leaf.ScrollBitmap);\n        //         sc.resource = \"blue-bg-scroller_png\";\n        //         sc.parent = this.scene;\n        //         sc.transform.scaleX = sc.transform.scaleY = scale;\n        //         sc.transform.x = w * x;\n        //         sc.transform.y = h * y;\n        //         sc.transform.alpha = 0.35;\n        //         sc.addComponent(Scroll, scrollSpeed);\n        //     }\n        // }\n\n    }\n\n    close() {\n        if (this.scene) {\n            if (this.scene.world) {\n                this.scene.world.scene = null;\n            }\n            this.scene.destroy();\n            this.scene = null;\n        }\n    }\n\n}\n\nclass Scroll extends ecs.Component {\n\n    scrollSpeed: number;\n\n    init(scrollSpeed: any) {\n        this.scrollSpeed = scrollSpeed;\n    }\n\n    update() {\n        let sc = this.getComponent(leaf.ScrollBitmap);\n        sc.scrollX += 0.005 * this.scrollSpeed;\n        sc.scrollY -= 0.005 * this.scrollSpeed;\n    }\n\n}"],"sourceRoot":""}