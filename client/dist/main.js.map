{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///../src/ImageLoader.ts","webpack:///../src/main.ts"],"names":[],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"../src/main.ts\");\n","export class ImageLoader {\n\n    /**\n     * Image 对象或 Image 对象数组作为参数返回给回调函数。\n     * @param url\n     * @param back\n     * @param thisObj\n     */\n    constructor(url: string | string[], back: Function, thisObj?: any) {\n        var image;\n        if (typeof url === \"string\") {\n            image = new Image();\n            image.src = <string>url;\n            image.onload = function () {\n                back.apply(thisObj, [image]);\n            }\n        } else {\n            var urls = <string[]>url;\n            var len = urls.length;\n            var images = [];\n            var count = 0;\n            var load = function (image) {\n                return function () {\n                    for (var i = 0; i < len; i++) {\n                        if (images[i] == image) {\n                            count++;\n                            break;\n                        }\n                    }\n                    if (count == len) {\n                        back.apply(thisObj, [images]);\n                    }\n                }\n            }\n            for (var i = 0; i < len; i++) {\n                image = new Image();\n                image.src = urls[i];\n                image.onload = load(image);\n                images.push(image);\n            }\n        }\n    }\n}","import { ImageLoader } from \"./ImageLoader\";\n\nexport class Main {\n\n\n    constructor() {\n        leaf.GLCore.init();\n        let gl = leaf.GLCore.gl;\n        gl.viewport(0, 0, leaf.GLCore.width, leaf.GLCore.height);\n        gl.enable(gl.BLEND);\n        gl.enable(gl.STENCIL_TEST);\n        gl.blendColor(1.0, 1.0, 1.0, 1.0);\n        //gl.enable(gl.CULL_FACE);\n        gl.activeTexture(gl.TEXTURE0);\n        gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, 1);\n        gl.clearColor(0.0, 0.0, 0.0, 1.0);\n\n        let ts = [\"resources/64x64_1.png\", \"resources/64x64_2.png\", \"resources/128x128_1.png\", \"resources/128x128_2.png\", \"resources/256x256_1.png\", \"resources/256x256_2.png\", \"resources/flower.png\"];\n        new ImageLoader(ts, this.loadImageComplete, this);\n    }\n\n    private loadImageComplete(images: HTMLImageElement[]): void {\n        // var t1 = new leaf.Texture(leaf.GLCore.createTexture(images[0]), images[0].width, images[0].height);\n        // var t2 = new leaf.Texture(leaf.GLCore.createTexture(images[1]), images[1].width, images[1].height);\n        // var t3 = new leaf.Texture(leaf.GLCore.createTexture(images[2]), images[2].width, images[2].height);\n        // var t4 = new leaf.Texture(leaf.GLCore.createTexture(images[3]), images[3].width, images[3].height);\n        // var t5 = new leaf.Texture(leaf.GLCore.createTexture(images[4]), images[4].width, images[4].height);\n        // var t6 = new leaf.Texture(leaf.GLCore.createTexture(images[5]), images[5].width, images[5].height);\n        // var t7 = new leaf.Texture(leaf.GLCore.createTexture(images[6]), images[6].width, images[6].height);\n\n        var ts = [];\n        // var ts = [t1, t2, t3, t4, t5, t6, t7];\n        for (let i = 0; i < images.length; i++) {\n            ts[i] = new leaf.Texture(leaf.GLCore.createTexture(images[i]), images[i].width, images[i].height);\n        }\n\n        let world = leaf.init();\n        let scene = new ecs.Scene();\n        world.scene = scene;\n        // for (let i = 0; i < 1; i++) {\n        //     let t = ts[~~(Math.random() * ts.length)];;\n        //     let entity = ecs.Entity.create();\n        //     entity.parent = scene;\n        //     entity.addComponent(leaf.Bitmap).texture = t;\n        //     entity = ecs.Entity.create();\n        //     entity.parent = scene;\n        //     entity.addComponent(leaf.Bitmap).texture = t;\n        //     entity = ecs.Entity.create();\n        //     entity.parent = scene;\n        //     entity.addComponent(leaf.Bitmap).texture = t;\n        // }\n        // scene.addComponent(Move);\n\n\n        let t = ts[~~(Math.random() * ts.length)];;\n        let p = ecs.Entity.create();\n        p.parent = scene;\n        p.transform.scaleX = 2;\n        p.transform.angle = Math.PI / 4;\n        p.transform.x = 100;\n        p.transform.y = 100;\n        let entity = ecs.Entity.create();\n        // entity.parent = scene;\n        // entity.addComponent(leaf.Bitmap).texture = ts[2];\n        // entity = ecs.Entity.create();\n        entity.parent = p;\n        let lb = entity.addComponent(leaf.Label);\n        // lb.text = \"你在想啥？!~\";\n        window[\"lb\"] = lb;\n        lb.fontColor = 0xff0000;\n        // entity.transform.angle = Math.PI / 4;\n        // entity.transform.x = 100;\n        // entity.transform.y = 0;\n\n        leaf.GLCore.scale = leaf.GLCore.width / 640;\n\n        scene.transform.scaleX = leaf.GLCore.width / 640;\n        scene.transform.scaleY = leaf.GLCore.width / 640;\n\n        let bm = ecs.Entity.create().addComponent(leaf.Bitmap);\n        bm.entity.parent = p;\n        bm.texture = ts[0];\n        // bm.entity.transform.scaleX = 2;\n        // bm.entity.transform.angle = Math.PI / 4;\n        // bm.entity.transform.x = 100;\n\n\n\n        let bm2 = ecs.Entity.create().addComponent(leaf.Bitmap);\n        // bm2.entity.parent = scene;\n        bm2.texture = ts[1];\n        // bm2.entity.transform.x = 200;\n        // bm2.entity.transform.y = 30;\n\n        // lb.entity.transform.angle = -Math.PI / 4;\n\n        setInterval(() => {\n            lb.text = `fps:${leaf.runInfo.fps}\\nt:${leaf.runInfo.fpsTime}\\ndc:${leaf.runInfo.fpsDrawCall}\\nnum:${leaf.runInfo.fpsDrawCount}`;\n        }, 1000)\n\n    }\n\n}\n\nclass Move extends ecs.Component {\n\n    update() {\n        for (var i = 0; i < this.entity.children.length - 1; i++) {\n            var child = this.entity.children[i];\n            child.transform.x = 300 * Math.random();\n            child.transform.y = 300 * Math.random();\n        }\n    }\n\n}\n\nwindow[\"Main\"] = Main;"],"sourceRoot":""}